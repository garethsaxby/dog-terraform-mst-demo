{"format_version":"0.1","terraform_version":"0.12.19","variables":{"lock_table_name":{"value":"test-table"},"state_bucket_name":{"value":"test-bucket"}},"planned_values":{"outputs":{"state_lock_table":{"sensitive":false},"state_storage_bucket":{"sensitive":false}},"root_module":{"resources":[{"address":"aws_dynamodb_table.state_lock","mode":"managed","type":"aws_dynamodb_table","name":"state_lock","provider_name":"aws","schema_version":1,"values":{"attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PAY_PER_REQUEST","global_secondary_index":[],"hash_key":"LockID","local_secondary_index":[],"name":"test-table","point_in_time_recovery":[{"enabled":false}],"range_key":null,"read_capacity":null,"server_side_encryption":[{"enabled":true}],"stream_enabled":null,"tags":{"Name":"test-table","Purpose":"Terraform State lock table for S3 Backend - https://www.terraform.io/docs/backends/types/s3.html"},"timeouts":null,"ttl":[],"write_capacity":null}},{"address":"aws_iam_policy.state_access","mode":"managed","type":"aws_iam_policy","name":"state_access","provider_name":"aws","schema_version":0,"values":{"description":"Terraform State Access granting access to both the S3 State Storage Bucket and DynamoDB Lock Table.","name_prefix":"terraform-state-access","path":"/"}},{"address":"aws_s3_bucket.state_storage","mode":"managed","type":"aws_s3_bucket","name":"state_storage","provider_name":"aws","schema_version":0,"values":{"acl":"private","bucket":"test-bucket","bucket_prefix":null,"cors_rule":[],"force_destroy":false,"lifecycle_rule":[{"abort_incomplete_multipart_upload_days":null,"enabled":true,"expiration":[],"noncurrent_version_expiration":[{"days":1095}],"noncurrent_version_transition":[{"days":93,"storage_class":"GLACIER"}],"prefix":null,"tags":null,"transition":[]}],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":null,"sse_algorithm":"aws:kms"}]}]}],"tags":{"Name":"test-bucket","Purpose":"Terraform State file storage bucket for S3 Backend - https://www.terraform.io/docs/backends/types/s3.html"},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[]}},{"address":"data.aws_iam_policy_document.state_access","mode":"data","type":"aws_iam_policy_document","name":"state_access","provider_name":"aws","schema_version":0,"values":{"override_json":null,"policy_id":"TerraformStateAccess","source_json":null,"statement":[{"actions":["s3:ListBucket"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":"S3BucketAccess"},{"actions":["s3:GetObject","s3:PutObject"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":"S3BucketObjectAccess"},{"actions":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":"DynamodbAccess"}],"version":"2012-10-17"}},{"address":"data.template_file.partial_state","mode":"data","type":"template_file","name":"partial_state","provider_name":"template","schema_version":0,"values":{"filename":null,"template":"bucket=\"${bucket_name}\"\nregion=\"${region_name}\"\ndynamodb_table=\"${dynamodb_table_name}\"\nencrypt=\"true\"\nworkspace_key_prefix=\"workspace\"\nsession_name=\"TerraformStateAccess\"\n","vars":{}}},{"address":"local_file.partial_state","mode":"managed","type":"local_file","name":"partial_state","provider_name":"local","schema_version":0,"values":{"content_base64":null,"directory_permission":"0777","file_permission":"0644","filename":"state.ini","sensitive_content":null}}]}},"resource_changes":[{"address":"aws_dynamodb_table.state_lock","mode":"managed","type":"aws_dynamodb_table","name":"state_lock","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PAY_PER_REQUEST","global_secondary_index":[],"hash_key":"LockID","local_secondary_index":[],"name":"test-table","point_in_time_recovery":[{"enabled":false}],"range_key":null,"read_capacity":null,"server_side_encryption":[{"enabled":true}],"stream_enabled":null,"tags":{"Name":"test-table","Purpose":"Terraform State lock table for S3 Backend - https://www.terraform.io/docs/backends/types/s3.html"},"timeouts":null,"ttl":[],"write_capacity":null},"after_unknown":{"arn":true,"attribute":[{}],"global_secondary_index":[],"id":true,"local_secondary_index":[],"point_in_time_recovery":[{}],"server_side_encryption":[{}],"stream_arn":true,"stream_label":true,"stream_view_type":true,"tags":{},"ttl":[]}}},{"address":"aws_iam_policy.state_access","mode":"managed","type":"aws_iam_policy","name":"state_access","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"description":"Terraform State Access granting access to both the S3 State Storage Bucket and DynamoDB Lock Table.","name_prefix":"terraform-state-access","path":"/"},"after_unknown":{"arn":true,"id":true,"name":true,"policy":true}}},{"address":"aws_s3_bucket.state_storage","mode":"managed","type":"aws_s3_bucket","name":"state_storage","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","bucket":"test-bucket","bucket_prefix":null,"cors_rule":[],"force_destroy":false,"lifecycle_rule":[{"abort_incomplete_multipart_upload_days":null,"enabled":true,"expiration":[],"noncurrent_version_expiration":[{"days":1095}],"noncurrent_version_transition":[{"days":93,"storage_class":"GLACIER"}],"prefix":null,"tags":null,"transition":[]}],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":null,"sse_algorithm":"aws:kms"}]}]}],"tags":{"Name":"test-bucket","Purpose":"Terraform State file storage bucket for S3 Backend - https://www.terraform.io/docs/backends/types/s3.html"},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[]},"after_unknown":{"acceleration_status":true,"arn":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":[],"hosted_zone_id":true,"id":true,"lifecycle_rule":[{"expiration":[],"id":true,"noncurrent_version_expiration":[{}],"noncurrent_version_transition":[{}],"transition":[]}],"logging":[],"object_lock_configuration":[],"region":true,"replication_configuration":[],"request_payer":true,"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"versioning":[{}],"website":[],"website_domain":true,"website_endpoint":true}}},{"address":"data.aws_iam_policy_document.state_access","mode":"data","type":"aws_iam_policy_document","name":"state_access","provider_name":"aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"policy_id":"TerraformStateAccess","source_json":null,"statement":[{"actions":["s3:ListBucket"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":"S3BucketAccess"},{"actions":["s3:GetObject","s3:PutObject"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":"S3BucketObjectAccess"},{"actions":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":"DynamodbAccess"}],"version":"2012-10-17"},"after_unknown":{"id":true,"json":true,"statement":[{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[true]},{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[true]},{"actions":[false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[true]}]}}},{"address":"data.template_file.partial_state","mode":"data","type":"template_file","name":"partial_state","provider_name":"template","change":{"actions":["read"],"before":null,"after":{"filename":null,"template":"bucket=\"${bucket_name}\"\nregion=\"${region_name}\"\ndynamodb_table=\"${dynamodb_table_name}\"\nencrypt=\"true\"\nworkspace_key_prefix=\"workspace\"\nsession_name=\"TerraformStateAccess\"\n","vars":{}},"after_unknown":{"id":true,"rendered":true,"vars":{"bucket_name":true,"dynamodb_table_name":true,"region_name":true}}}},{"address":"local_file.partial_state","mode":"managed","type":"local_file","name":"partial_state","provider_name":"local","change":{"actions":["create"],"before":null,"after":{"content_base64":null,"directory_permission":"0777","file_permission":"0644","filename":"state.ini","sensitive_content":null},"after_unknown":{"content":true,"id":true}}}],"output_changes":{"state_lock_table":{"actions":["create"],"before":null,"after_unknown":true},"state_storage_bucket":{"actions":["create"],"before":null,"after_unknown":true}},"prior_state":{"format_version":"0.1","terraform_version":"0.12.19","values":{"root_module":{"resources":[{"address":"data.local_file.partial_state_template","mode":"data","type":"local_file","name":"partial_state_template","provider_name":"local","schema_version":0,"values":{"content":"bucket=\"${bucket_name}\"\nregion=\"${region_name}\"\ndynamodb_table=\"${dynamodb_table_name}\"\nencrypt=\"true\"\nworkspace_key_prefix=\"workspace\"\nsession_name=\"TerraformStateAccess\"\n","content_base64":"YnVja2V0PSIke2J1Y2tldF9uYW1lfSIKcmVnaW9uPSIke3JlZ2lvbl9uYW1lfSIKZHluYW1vZGJfdGFibGU9IiR7ZHluYW1vZGJfdGFibGVfbmFtZX0iCmVuY3J5cHQ9InRydWUiCndvcmtzcGFjZV9rZXlfcHJlZml4PSJ3b3Jrc3BhY2UiCnNlc3Npb25fbmFtZT0iVGVycmFmb3JtU3RhdGVBY2Nlc3MiCg==","filename":"./state.tpl","id":"d0f5d5f4d2d2c47daaab1e597d65f2524320b303"}}]}}},"configuration":{"root_module":{"outputs":{"state_lock_table":{"expression":{"references":["aws_dynamodb_table.state_lock"]},"description":"The DynamoDB table created for locking the Terraform state."},"state_storage_bucket":{"expression":{"references":["aws_s3_bucket.state_storage"]},"description":"The S3 bucket created for storing the Terraform state."}},"resources":[{"address":"aws_dynamodb_table.state_lock","mode":"managed","type":"aws_dynamodb_table","name":"state_lock","provider_config_key":"aws","expressions":{"attribute":[{"name":{"constant_value":"LockID"},"type":{"constant_value":"S"}}],"billing_mode":{"constant_value":"PAY_PER_REQUEST"},"hash_key":{"constant_value":"LockID"},"name":{"references":["var.lock_table_name"]},"point_in_time_recovery":[{"enabled":{"constant_value":false}}],"server_side_encryption":[{"enabled":{"constant_value":true}}],"tags":{"references":["var.lock_table_name"]}},"schema_version":1},{"address":"aws_iam_policy.state_access","mode":"managed","type":"aws_iam_policy","name":"state_access","provider_config_key":"aws","expressions":{"description":{"constant_value":"Terraform State Access granting access to both the S3 State Storage Bucket and DynamoDB Lock Table."},"name_prefix":{"constant_value":"terraform-state-access"},"path":{"constant_value":"/"},"policy":{"references":["data.aws_iam_policy_document.state_access"]}},"schema_version":0},{"address":"aws_s3_bucket.state_storage","mode":"managed","type":"aws_s3_bucket","name":"state_storage","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["var.state_bucket_name"]},"force_destroy":{"constant_value":false},"lifecycle_rule":[{"enabled":{"constant_value":true},"noncurrent_version_expiration":[{"days":{"constant_value":1095}}],"noncurrent_version_transition":[{"days":{"constant_value":93},"storage_class":{"constant_value":"GLACIER"}}]}],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":{"constant_value":"aws:kms"}}]}]}],"tags":{"references":["var.state_bucket_name"]},"versioning":[{"enabled":{"constant_value":true},"mfa_delete":{"constant_value":false}}]},"schema_version":0},{"address":"local_file.partial_state","mode":"managed","type":"local_file","name":"partial_state","provider_config_key":"local","expressions":{"content":{"references":["data.template_file.partial_state"]},"file_permission":{"constant_value":"0644"},"filename":{"constant_value":"state.ini"}},"schema_version":0},{"address":"data.aws_iam_policy_document.state_access","mode":"data","type":"aws_iam_policy_document","name":"state_access","provider_config_key":"aws","expressions":{"policy_id":{"constant_value":"TerraformStateAccess"},"statement":[{"actions":{"constant_value":["s3:ListBucket"]},"effect":{"constant_value":"Allow"},"resources":{"references":["aws_s3_bucket.state_storage"]},"sid":{"constant_value":"S3BucketAccess"}},{"actions":{"constant_value":["s3:GetObject","s3:PutObject"]},"effect":{"constant_value":"Allow"},"resources":{"references":["aws_s3_bucket.state_storage"]},"sid":{"constant_value":"S3BucketObjectAccess"}},{"actions":{"constant_value":["dynamodb:GetItem","dynamodb:PutItem","dynamodb:DeleteItem"]},"effect":{"constant_value":"Allow"},"resources":{"references":["aws_dynamodb_table.state_lock"]},"sid":{"constant_value":"DynamodbAccess"}}],"version":{"constant_value":"2012-10-17"}},"schema_version":0},{"address":"data.local_file.partial_state_template","mode":"data","type":"local_file","name":"partial_state_template","provider_config_key":"local","expressions":{"filename":{"references":["path.module"]}},"schema_version":0},{"address":"data.template_file.partial_state","mode":"data","type":"template_file","name":"partial_state","provider_config_key":"template","expressions":{"template":{"references":["data.local_file.partial_state_template"]},"vars":{"references":["aws_s3_bucket.state_storage","aws_s3_bucket.state_storage","aws_dynamodb_table.state_lock"]}},"schema_version":0}],"variables":{"lock_table_name":{"description":"The name for the Terraform Locking DynamoDB table that will be created. Must be unique in the region of the AWS account it is created within."},"state_bucket_name":{"description":"The name for the Terraform state S3 bucket that will be created. Must be globally unique."}}}}}
